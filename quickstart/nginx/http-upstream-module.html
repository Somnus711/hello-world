<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2019-03-21
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190321" />
    <meta http-equiv="Content-Language" content="en" />
    <title>demo maven site - </title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<link rel="stylesheet" href="../../css/plain-links.css"/>
          
            </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="http://github.com/xiaojiaC/hello-world">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
        alt="Fork me on GitHub">
    </a>
  
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container"><div class="nav-collapse">
            
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../index.html"  title="Introduction">Introduction</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">FAQ <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../faq/maven-plugin.html"  title="Maven Plugin">Maven Plugin</a>
</li>
                  
                      <li>      <a href="../../quickstart/groovy-diff-java.html"  title="Groovy Differences With Java">Groovy Differences With Java</a>
</li>
                  
                      <li>      <a href="../../quickstart/nginx/http-upstream-module.html"  title="Nginx Module: ngx_http_upstream_module">Nginx Module: ngx_http_upstream_module</a>
</li>
                  
                      <li>      <a href="../../quickstart/nginx/websocket-proxying.html"  title="Nginx WebSocket Proxying">Nginx WebSocket Proxying</a>
</li>
                  
                      <li>      <a href="../../quickstart/proguard/obfuscation-options.html"  title="ProGuard Obfuscation Options">ProGuard Obfuscation Options</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../cookbook/asciidoc-table.html"  title="AsciiDoc Table">AsciiDoc Table</a>
</li>
                  
                      <li>      <a href="../../quickstart/maven-plugin.html"  title="Maven Plugin">Maven Plugin</a>
</li>
                  
                      <li>      <a href="../../cookbook/docker-maven-plugin.html"  title="Docker Maven Plugin">Docker Maven Plugin</a>
</li>
                  
                      <li>      <a href="https://progit.bootcss.com/"  title="Pro Git">Pro Git</a>
</li>
                  
                      <li>      <a href="../../cookbook/spring-session.html"  title="Spring Session">Spring Session</a>
</li>
                  
                      <li>      <a href="../../cookbook/spring-data-jpa.html"  title="Spring Data JPA">Spring Data JPA</a>
</li>
                  
                      <li>      <a href="../../cookbook/spring-data-solr.html"  title="Spring Data Solr">Spring Data Solr</a>
</li>
                  
                      <li>      <a href="../../cookbook/spring-test.html"  title="Spring Testing">Spring Testing</a>
</li>
                  
                      <li>      <a href="../../cookbook/spring-boot-test.html"  title="Spring Boot Testing">Spring Boot Testing</a>
</li>
                  
                      <li>      <a href="../../cookbook/spring-rest-docs.html"  title="Spring REST Docs">Spring REST Docs</a>
</li>
                  
                      <li>      <a href="../../cookbook/springfox.html"  title="Springfox">Springfox</a>
</li>
                  
                      <li>      <a href="../../cookbook/groovy.html"  title="Groovy">Groovy</a>
</li>
                          </ul>
      </li>
                  </ul>
          
          
                                                              
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../../index.html" id="bannerLeft">
                                                                                                <img src="../../images/hello-world.png"  alt="demo maven site"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../.././" title="Hello World">
        Hello World</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2019-03-21</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 1.0.0-SNAPSHOT</li>
            
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <!-- TOC -->
<ul>
  
<li><a href="#directives-upstream"><tt>upstream</tt></a></li>
  
<li><a href="#directives-server"><tt>server</tt></a></li>
  
<li><a href="#directives-zone"><tt>zone</tt></a></li>
  
<li><a href="#directives-state"><tt>state</tt></a></li>
  
<li><a href="#directives-hash"><tt>hash</tt></a></li>
  
<li><a href="#directives-ip-hash"><tt>ip_hash</tt></a></li>
  
<li><a href="#directives-keepalive"><tt>keepalive</tt></a></li>
  
<li><a href="#directives-keepalive-requests"><tt>keepalive_requests</tt></a></li>
  
<li><a href="#directives-keepalive-timeout"><tt>keepalive_timeout</tt></a></li>
  
<li><a href="#directives-least-conn"><tt>least_conn</tt></a></li>
  
<li><a href="#directives-least-time"><tt>least_time</tt></a></li>
  
<li><a href="#directives-queue"><tt>queue</tt></a></li>
  
<li><a href="#directives-random"><tt>random</tt></a> <!-- /TOC --></li>
</ul>
<h1><tt>ngx_http_upstream_module</tt></h1>
<p><tt>ngx_http_upstream_module</tt> &#x6a21;&#x5757;&#x7528;&#x4e8e;&#x5b9a;&#x4e49;&#x53ef;&#x7531;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass">proxy_pass</a>&#xff0c;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_pass">fastcgi_pass</a>&#xff0c;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_uwsgi_module.html#uwsgi_pass">uwsgi_pass</a>&#xff0c;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_scgi_module.html#scgi_pass">scgi_pass</a>&#xff0c;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_memcached_module.html#memcached_pass">memcached_pa&#x200b;&#x200b;ss</a>&#x548c;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_grpc_module.html#grpc_pass">grpc_pass</a>&#x6307;&#x4ee4;&#x5f15;&#x7528;&#x7684;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x3002;</p>
<div class="section">
<h2>&#x793a;&#x4f8b;&#x914d;&#x7f6e;<a name="a"></a></h2>

<div class="source">
<pre>upstream backend {
    server backend1.example.com       weight=5;
    server backend2.example.com:8080;
    server unix:/tmp/backend3;

    server backup1.example.com:8080   backup;
    server backup2.example.com:8080   backup;
}

server {
    location / {
        proxy_pass http://backend;
    }
}
</pre></div>
<p>&#x5177;&#x6709;&#x5b9a;&#x671f;&#x8fd0;&#x884c;&#x5065;&#x5eb7;&#x72b6;&#x51b5;&#x68c0;&#x67e5;&#x7684;&#x52a8;&#x6001;&#x53ef;&#x914d;&#x7f6e;&#x7ec4;&#x53ef;&#x4f5c;&#x4e3a;&#x6211;&#x4eec;<a class="externalLink" href="https://www.nginx.com/products/">&#x5546;&#x4e1a;&#x8ba2;&#x9605;</a>&#x7684;&#x4e00;&#x90e8;&#x5206;&#xff1a;</p>

<div class="source">
<pre>resolver 10.0.0.1;

upstream dynamic {
    zone upstream_dynamic 64k;

    server backend1.example.com      weight=5;
    server backend2.example.com:8080 fail_timeout=5s slow_start=30s;
    server 192.0.2.1                 max_fails=3;
    server backend3.example.com      resolve;
    server backend4.example.com      service=http resolve;

    server backup1.example.com:8080  backup;
    server backup2.example.com:8080  backup;
}

server {
    location / {
        proxy_pass http://dynamic;
        health_check;
    }
}
</pre></div></div>
<div class="section">
<h2>&#x6307;&#x4ee4;<a name="a"></a></h2>
<div class="section">
<h3><span id="directives-upstream"><tt>upstream</tt></span><a name="upstream"></a></h3>

<div class="source">
<pre>Syntax:	upstream name { ... }
Default:	&#x2014;
Context:	http
</pre></div>
<p>&#x5b9a;&#x4e49;&#x4e00;&#x7ec4;&#x670d;&#x52a1;&#x5668;&#x3002;&#x670d;&#x52a1;&#x5668;&#x53ef;&#x4ee5;&#x76d1;&#x542c;&#x4e0d;&#x540c;&#x7684;&#x7aef;&#x53e3;&#x3002;&#x6b64;&#x5916;&#xff0c;&#x53ef;&#x4ee5;&#x6df7;&#x5408;&#x76d1;&#x542c;TCP&#x548c;UNIX&#x57df;&#x5957;&#x63a5;&#x5b57;&#x7684;&#x670d;&#x52a1;&#x5668;&#x3002;</p>
<p>&#x6837;&#x4f8b;&#xff1a;</p>

<div class="source">
<pre>upstream backend {
    server backend1.example.com weight=5;
    server 127.0.0.1:8080       max_fails=3 fail_timeout=30s;
    server unix:/tmp/backend3;

    server backup1.example.com  backup;
}
</pre></div>
<p>&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x4f7f;&#x7528;&#x52a0;&#x6743;&#x8f6e;&#x8be2;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x7b56;&#x7565;&#x5728;&#x670d;&#x52a1;&#x5668;&#x4e4b;&#x95f4;&#x5206;&#x914d;&#x8bf7;&#x6c42;&#x3002;&#x5728;&#x4e0a;&#x9762;&#x7684;&#x793a;&#x4f8b;&#x4e2d;&#xff0c;&#x6bcf;7&#x4e2a;&#x8bf7;&#x6c42;&#x5c06;&#x6309;&#x5982;&#x4e0b;&#x65b9;&#x5f0f;&#x5206;&#x53d1;&#xff1a;5&#x4e2a;&#x8bf7;&#x6c42;&#x8f6c;&#x53d1;&#x5230;<tt>backend1.example.com</tt>&#xff0c;&#x53e6;2&#x4e2a;&#x8bf7;&#x6c42;&#x5206;&#x522b;&#x8f6c;&#x53d1;&#x7ed9;&#x7b2c;&#x4e8c;&#x4e2a;&#x548c;&#x7b2c;&#x4e09;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x3002;&#x5982;&#x679c;&#x5728;&#x4e0e;&#x670d;&#x52a1;&#x5668;&#x901a;&#x4fe1;&#x671f;&#x95f4;&#x53d1;&#x751f;&#x9519;&#x8bef;&#xff0c;&#x8bf7;&#x6c42;&#x5c06;&#x88ab;&#x4f20;&#x9012;&#x5230;&#x4e0b;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x4f9d;&#x6b64;&#x7c7b;&#x63a8;&#xff0c;&#x76f4;&#x5230;&#x5c1d;&#x8bd5;&#x5b8c;&#x6240;&#x6709;&#x6b63;&#x5e38;&#x8fd0;&#x884c;&#x7684;&#x670d;&#x52a1;&#x5668;&#x3002;&#x5982;&#x679c;&#x65e0;&#x6cd5;&#x4ece;&#x4efb;&#x4f55;&#x670d;&#x52a1;&#x5668;&#x83b7;&#x5f97;&#x6210;&#x529f;&#x7684;&#x54cd;&#x5e94;&#xff0c;&#x5219;&#x5ba2;&#x6237;&#x7aef;&#x5c06;&#x63a5;&#x6536;&#x5230;&#x4e0e;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x7684;&#x901a;&#x4fe1;&#x7ed3;&#x679c;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-server"><tt>server</tt></span><a name="server"></a></h3>

<div class="source">
<pre>Syntax:	server address [parameters];
Default:	&#x2014;
Context:	upstream
</pre></div>
<p>&#x5b9a;&#x4e49;&#x670d;&#x52a1;&#x5668;&#x7684;<i>address</i>&#x548c;&#x5176;&#x4ed6;<i>parameters</i>&#x3002;&#x53ef;&#x4ee5;&#x5c06;&#x5730;&#x5740;&#x6307;&#x5b9a;&#x4e3a;&#x57df;&#x540d;&#x6216;IP&#x5730;&#x5740;&#xff0c;&#x4f7f;&#x7528;&#x53ef;&#x9009;&#x7aef;&#x53e3;&#xff0c;&#x6216;&#x8005;&#x6307;&#x5b9a;&#x4e3a; &#x201c;<tt>unix:</tt>&#x201d; &#x524d;&#x7f00;&#x540e;&#x8ddf;UNIX&#x57df;&#x5957;&#x63a5;&#x5b57;&#x8def;&#x5f84;&#x3002;&#x5982;&#x679c;&#x672a;&#x6307;&#x5b9a;&#x7aef;&#x53e3;&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x7aef;&#x53e3;80&#x3002;&#x89e3;&#x6790;&#x4e3a;&#x591a;&#x4e2a;IP&#x5730;&#x5740;&#x7684;&#x57df;&#x540d;&#x4e00;&#x6b21;&#x5b9a;&#x4e49;&#x591a;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x3002;</p>
<p>&#x53ef;&#x4ee5;&#x5b9a;&#x4e49;&#x4ee5;&#x4e0b;&#x53c2;&#x6570;&#xff1a;</p>

<ul>
  
<li>
<p><tt>weight=number</tt>: &#x8bbe;&#x7f6e;&#x670d;&#x52a1;&#x5668;&#x7684;&#x6743;&#x91cd;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a;1&#x3002;</p></li>
  
<li>
<p><tt>max_conns=number</tt>: &#x9650;&#x5236;&#x4e0e;&#x4ee3;&#x7406;&#x670d;&#x52a1;&#x5668;&#x7684;&#x6700;&#x5927;&#x5e76;&#x53d1;&#x6d3b;&#x52a8;&#x8fde;&#x63a5;&#x6570;&#xff08;1.11.5&#xff09;&#x3002;&#x9ed8;&#x8ba4;&#x503c;&#x4e3a;&#x96f6;&#xff0c;&#x8868;&#x793a;&#x6ca1;&#x6709;&#x9650;&#x5236;&#x3002;&#x5982;&#x679c;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x4e0d;&#x9a7b;&#x7559;&#x5728;<a href="">&#x5171;&#x4eab;&#x5185;&#x5b58;</a>&#x4e2d;&#xff0c;&#x5219;&#x6bcf;&#x4e2a;&#x5de5;&#x4f5c;&#x8fdb;&#x7a0b;&#x7684;&#x9650;&#x5236;&#x90fd;&#x6709;&#x6548;&#x3002;</p>
<p>&#x5982;&#x679c;&#x542f;&#x7528;&#x4e86;&#x7a7a;&#x95f2;keepalive&#x8fde;&#x63a5;&#xff0c;&#x591a;&#x4e2a;&#x5de5;&#x4f5c;&#x8fdb;&#x7a0b;&#x548c;&#x5171;&#x4eab;&#x5185;&#x5b58;&#xff0c;&#x5219;&#x4ee3;&#x7406;&#x670d;&#x52a1;&#x5668;&#x7684;&#x6d3b;&#x52a8;&#x548c;&#x7a7a;&#x95f2;&#x8fde;&#x63a5;&#x603b;&#x6570;&#x53ef;&#x80fd;&#x4f1a;&#x8d85;&#x8fc7;<tt>max_conns</tt>&#x503c;&#x3002;</p>
<p>&#x81ea;&#x7248;&#x672c;1.5.9&#x548c;&#x7248;&#x672c;1.11.5&#x4e4b;&#x524d;&#xff0c;&#x6b64;&#x53c2;&#x6570;&#x4f5c;&#x4e3a;&#x6211;&#x4eec;&#x7684;<a class="externalLink" href="https://www.nginx.com/products/">&#x5546;&#x4e1a;&#x8ba2;&#x9605;</a>&#x7684;&#x4e00;&#x90e8;&#x5206;&#x63d0;&#x4f9b;&#x3002;</p></li>
  
<li>
<p><tt>max_fails=number</tt>: &#x8bbe;&#x7f6e;&#x5e94;&#x5728;<tt>fail_timeout</tt>&#x53c2;&#x6570;&#x8bbe;&#x7f6e;&#x7684;&#x6301;&#x7eed;&#x65f6;&#x95f4;&#x5185;&#x53d1;&#x751f;&#x4e0e;&#x670d;&#x52a1;&#x5668;&#x901a;&#x4fe1;&#x5931;&#x8d25;&#x5c1d;&#x8bd5;&#x7684;&#x6b21;&#x6570;&#xff0c;&#x4ee5;&#x8003;&#x8651;&#x670d;&#x52a1;&#x5668;&#x5728;<tt>fail_timeout</tt>&#x53c2;&#x6570;&#x8bbe;&#x7f6e;&#x7684;&#x6301;&#x7eed;&#x65f6;&#x95f4;&#x5185;&#x4e0d;&#x53ef;&#x7528;&#x3002;&#x5373;&#x5728;<tt>fail_timeout</tt>&#x53c2;&#x6570;&#x5b9a;&#x4e49;&#x7684;&#x65f6;&#x95f4;&#x6bb5;&#x5185;&#xff0c;&#x5982;&#x679c;&#x5931;&#x8d25;&#x7684;&#x6b21;&#x6570;&#x8fbe;&#x5230;&#x6b64;&#x503c;&#xff0c;nginx&#x5c31;&#x8ba4;&#x4e3a;&#x670d;&#x52a1;&#x5668;&#x4e0d;&#x53ef;&#x7528;&#x3002;&#x5728;&#x4e0b;&#x4e00;&#x4e2a;<tt>fail_timeout</tt>&#x65f6;&#x95f4;&#x6bb5;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x4e0d;&#x4f1a;&#x518d;&#x88ab;&#x5c1d;&#x8bd5;&#x3002;&#x5931;&#x8d25;&#x7684;&#x5c1d;&#x8bd5;&#x6b21;&#x6570;&#x9ed8;&#x8ba4;&#x4e3a;1&#x3002;&#x8bbe;&#x4e3a;0&#x5c31;&#x4f1a;&#x505c;&#x6b62;&#x7edf;&#x8ba1;&#x5c1d;&#x8bd5;&#x6b21;&#x6570;&#xff0c;&#x5e76;&#x8ba4;&#x4e3a;&#x670d;&#x52a1;&#x5668;&#x662f;&#x4e00;&#x76f4;&#x53ef;&#x7528;&#x7684;&#x3002;&#x4f60;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream">proxy_next_upstream</a>&#x3001;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_next_upstream">fastcgi_next_upstream</a>&#x3001;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_uwsgi_module.html#uwsgi_next_upstream">uwsgi_next_upstream</a>&#x3001;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_scgi_module.html#scgi_next_upstream">scgi_next_upstream</a>&#x3001;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_memcached_module.html#memcached_next_upstream">memcached_next_upstream</a>&#x548c;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_grpc_module.html#grpc_next_upstream">grpc_next_upstream</a>&#x6307;&#x4ee4;&#x5b9a;&#x4e49;&#x4ec0;&#x4e48;&#x662f;&#x5931;&#x8d25;&#x7684;&#x5c1d;&#x8bd5;&#x3002;</p></li>
  
<li>
<p><tt>fail_timeout=time</tt>: </p>
  
<ul>
    
<li>&#x7edf;&#x8ba1;&#x5931;&#x8d25;&#x5c1d;&#x8bd5;&#x6b21;&#x6570;&#x7684;&#x65f6;&#x95f4;&#x6bb5;&#x3002;&#x5728;&#x8fd9;&#x6bb5;&#x65f6;&#x95f4;&#x4e2d;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x5931;&#x8d25;&#x6b21;&#x6570;&#x8fbe;&#x5230;&#x6307;&#x5b9a;&#x7684;&#x5c1d;&#x8bd5;&#x6b21;&#x6570;&#xff0c;&#x670d;&#x52a1;&#x5668;&#x5c31;&#x88ab;&#x8ba4;&#x4e3a;&#x4e0d;&#x53ef;&#x7528;&#x3002;</li>
    
<li>&#x670d;&#x52a1;&#x5668;&#x88ab;&#x8ba4;&#x4e3a;&#x4e0d;&#x53ef;&#x7528;&#x7684;&#x65f6;&#x95f4;&#x6bb5;&#x3002;</li>
  </ul>
<p>&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x53c2;&#x6570;&#x8bbe;&#x7f6e;&#x4e3a;10&#x79d2;&#x3002;</p></li>
  
<li>
<p><tt>backup</tt>: &#x5c06;&#x670d;&#x52a1;&#x5668;&#x6807;&#x8bb0;&#x4e3a;&#x5907;&#x4efd;&#x670d;&#x52a1;&#x5668;&#x3002;&#x5f53;&#x4e3b;&#x670d;&#x52a1;&#x5668;&#x4e0d;&#x53ef;&#x7528;&#x65f6;&#xff0c;&#x8bf7;&#x6c42;&#x4f1a;&#x88ab;&#x4f20;&#x9012;&#x7ed9;&#x8fd9;&#x4e9b;&#x670d;&#x52a1;&#x5668;&#x3002;</p></li>
  
<li>
<p><tt>down</tt>: &#x5c06;&#x670d;&#x52a1;&#x5668;&#x6807;&#x8bb0;&#x4e3a;&#x6c38;&#x4e45;&#x4e0d;&#x53ef;&#x7528;&#x3002;</p></li>
</ul></div>
<div class="section">
<h3><span id="directives-zone"><tt>zone</tt></span><a name="zone"></a></h3>

<div class="source">
<pre>Syntax:	zone name [size];
Default:	&#x2014;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.9.0&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x5b9a;&#x4e49;&#x5171;&#x4eab;&#x5185;&#x5b58;&#x533a;&#x57df;&#x7684;<i>name</i>&#x548c;<i>size</i>&#xff0c;&#x8be5;&#x533a;&#x57df;&#x4fdd;&#x6301;&#x7ec4;&#x5de5;&#x4f5c;&#x8fdb;&#x7a0b;&#x4e4b;&#x95f4;&#x5171;&#x4eab;&#x7684;&#x7ec4;&#x914d;&#x7f6e;&#x548c;&#x8fd0;&#x884c;&#x65f6;&#x72b6;&#x6001;&#x3002;&#x51e0;&#x4e2a;&#x7ec4;&#x53ef;&#x80fd;&#x5171;&#x4eab;&#x540c;&#x4e00;&#x4e2a;&#x533a;&#x57df;&#x3002;&#x5728;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x4ec5;&#x6307;&#x5b9a;&#x4e00;&#x6b21;<i>size</i>&#x5c31;&#x8db3;&#x591f;&#x4e86;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-state"><tt>state</tt></span><a name="state"></a></h3>

<div class="source">
<pre>Syntax:	state file;
Default:	&#x2014;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.9.7&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x6307;&#x5b9a;&#x4fdd;&#x6301;&#x52a8;&#x6001;&#x53ef;&#x914d;&#x7f6e;&#x7ec4;&#x72b6;&#x6001;&#x7684;<i>file</i>&#x3002;</p>
<p>&#x6837;&#x4f8b;&#xff1a;</p>

<div class="source">
<pre>state /var/lib/nginx/state/servers.conf; # path for Linux
state /var/db/nginx/state/servers.conf;  # path for FreeBSD
</pre></div>
<p>&#x72b6;&#x6001;&#x76ee;&#x524d;&#x4ec5;&#x9650;&#x4e8e;&#x5e26;&#x6709;&#x53c2;&#x6570;&#x7684;&#x670d;&#x52a1;&#x5668;&#x5217;&#x8868;&#x3002;&#x89e3;&#x6790;&#x914d;&#x7f6e;&#x65f6;&#x5c06;&#x8bfb;&#x53d6;&#x8be5;&#x6587;&#x4ef6;&#xff0c;&#x5e76;&#x5728;&#x6bcf;&#x6b21;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_api_module.html#http_upstreams_http_upstream_name_servers_">&#x66f4;&#x6539;</a>upstream&#x914d;&#x7f6e;&#x65f6;&#x66f4;&#x65b0;&#x8be5;&#x6587;&#x4ef6;&#x3002;&#x5e94;&#x907f;&#x514d;&#x76f4;&#x63a5;&#x66f4;&#x6539;&#x6587;&#x4ef6;&#x5185;&#x5bb9;&#x3002;&#x8be5;&#x6307;&#x4ee4;&#x4e0d;&#x80fd;&#x4e0e;<a href="#directives-server">server&#x6307;&#x4ee4;</a>&#x4e00;&#x8d77;&#x4f7f;&#x7528;&#x3002;</p>
<p><a class="externalLink" href="http://nginx.org/en/docs/control.html#reconfiguration">&#x914d;&#x7f6e;&#x91cd;&#x65b0;&#x52a0;&#x8f7d;</a>&#x6216;<a class="externalLink" href="http://nginx.org/en/docs/control.html#upgrade">&#x4e8c;&#x8fdb;&#x5236;&#x5347;&#x7ea7;</a>&#x671f;&#x95f4;&#x6240;&#x505a;&#x7684;&#x66f4;&#x6539;&#x53ef;&#x80fd;&#x4f1a;&#x4e22;&#x5931;&#x3002;</p>
<p>&#x8be5;&#x6307;&#x4ee4;&#x4f5c;&#x4e3a;&#x6211;&#x4eec;<a class="externalLink" href="https://www.nginx.com/products/">&#x5546;&#x4e1a;&#x8ba2;&#x9605;</a>&#x7684;&#x4e00;&#x90e8;&#x5206;&#x63d0;&#x4f9b;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-hash"><tt>hash</tt></span><a name="hash"></a></h3>

<div class="source">
<pre>Syntax:	hash key [consistent];
Default:	&#x2014;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.7.2&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x6307;&#x5b9a;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x7684;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x65b9;&#x6cd5;&#xff0c;&#x5176;&#x4e2d;&#x5ba2;&#x6237;&#x7aef;-&#x670d;&#x52a1;&#x5668;&#x6620;&#x5c04;&#x57fa;&#x4e8e;<tt>key</tt>&#x54c8;&#x5e0c;&#x503c;&#x3002;<tt>key</tt>&#x53ef;&#x4ee5;&#x5305;&#x542b;&#x6587;&#x672c;&#xff0c;&#x53d8;&#x91cf;&#x53ca;&#x5176;&#x7ec4;&#x5408;&#x3002;&#x8bf7;&#x6ce8;&#x610f;&#xff0c;&#x4ece;&#x7ec4;&#x4e2d;&#x6dfb;&#x52a0;&#x6216;&#x5220;&#x9664;&#x670d;&#x52a1;&#x5668;&#x53ef;&#x80fd;&#x4f1a;&#x5bfc;&#x81f4;&#x5c06;&#x5927;&#x591a;&#x6570;<tt>key</tt>&#x91cd;&#x65b0;&#x6620;&#x5c04;&#x5230;&#x4e0d;&#x540c;&#x7684;&#x670d;&#x52a1;&#x5668;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x4e0e;<a class="externalLink" href="https://metacpan.org/pod/Cache::Memcached">Cache::Memcached</a>Perl&#x5e93;&#x517c;&#x5bb9;&#x3002;</p>
<p>&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;<tt>consistent</tt>&#x53c2;&#x6570;&#xff0c;&#x5219;&#x5c06;&#x4f7f;&#x7528;<a class="externalLink" href="https://www.metabrew.com/article/libketama-consistent-hashing-algo-memcached-clients">ketama</a>&#x4e00;&#x81f4;&#x6027;&#x54c8;&#x5e0c;&#x65b9;&#x6cd5;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x786e;&#x4fdd;&#x5728;&#x5411;&#x7ec4;&#x6dfb;&#x52a0;&#x670d;&#x52a1;&#x5668;&#x6216;&#x4ece;&#x7ec4;&#x4e2d;&#x5220;&#x9664;&#x670d;&#x52a1;&#x5668;&#x65f6;&#xff0c;&#x53ea;&#x6709;&#x5c11;&#x6570;keys&#x5c06;&#x91cd;&#x65b0;&#x6620;&#x5c04;&#x5230;&#x4e0d;&#x540c;&#x7684;&#x670d;&#x52a1;&#x5668;&#x3002;&#x8fd9;&#x6709;&#x52a9;&#x4e8e;&#x4e3a;&#x7f13;&#x5b58;&#x670d;&#x52a1;&#x5668;&#x5b9e;&#x73b0;&#x66f4;&#x9ad8;&#x7684;&#x7f13;&#x5b58;&#x547d;&#x4e2d;&#x7387;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x4e0e;<a class="externalLink" href="https://metacpan.org/pod/Cache::Memcached::Fast">Cache::Memcached::Fast</a>Perl&#x5e93;&#x517c;&#x5bb9;&#xff0c;&#x5e76;&#x5c06;<i>ketama_points</i>&#x53c2;&#x6570;&#x8bbe;&#x7f6e;&#x4e3a;160&#x3002;</p></div>
<div class="section">
<h3><span id="directives-ip-hash"><tt>ip_hash</tt></span><a name="ip_hash"></a></h3>

<div class="source">
<pre>Syntax:	ip_hash;
Default:	&#x2014;
Context:	upstream
</pre></div>
<p>&#x6307;&#x5b9a;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x7684;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x65b9;&#x6cd5;&#xff0c;&#x5176;&#x4e2d;&#x8bf7;&#x6c42;&#x57fa;&#x4e8e;&#x5ba2;&#x6237;&#x7aef;IP&#x5730;&#x5740;&#x5728;&#x670d;&#x52a1;&#x5668;&#x4e4b;&#x95f4;&#x5206;&#x53d1;&#x3002;&#x5ba2;&#x6237;&#x7aef;IPv4&#x5730;&#x5740;&#x7684;&#x524d;&#x4e09;&#x4e2a;&#x516b;&#x4f4d;&#x5b57;&#x8282;&#x6216;&#x6574;&#x4e2a;IPv6&#x5730;&#x5740;&#x7528;&#x4f5c;&#x6563;&#x5217;&#x952e;&#x3002;&#x8be5;&#x65b9;&#x6cd5;&#x786e;&#x4fdd;&#x6765;&#x81ea;&#x540c;&#x4e00;&#x5ba2;&#x6237;&#x7aef;&#x7684;&#x8bf7;&#x6c42;&#x5c06;&#x59cb;&#x7ec8;&#x4f20;&#x9012;&#x5230;&#x540c;&#x4e00;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x9664;&#x975e;&#x6b64;&#x670d;&#x52a1;&#x5668;&#x4e0d;&#x53ef;&#x7528;&#x3002;&#x5728;&#x540e;&#x4e00;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x5ba2;&#x6237;&#x7aef;&#x8bf7;&#x6c42;&#x5c06;&#x88ab;&#x4f20;&#x9012;&#x5230;&#x53e6;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x800c;&#x4e14;&#x5f88;&#x6709;&#x53ef;&#x80fd;&#x7684;&#x662f;&#xff0c;&#x5b83;&#x4e5f;&#x5c06;&#x59cb;&#x7ec8;&#x662f;&#x540c;&#x4e00;&#x53f0;&#x670d;&#x52a1;&#x5668;&#x3002;&#x53ef;&#x4ee5;&#x89e3;&#x51b3;session&#x548c;cookie&#x7684;&#x95ee;&#x9898;&#xff0c;&#x4f46;&#x4f1a;&#x5bfc;&#x81f4;&#x8d1f;&#x8f7d;&#x4e0d;&#x5747;&#x8861;&#x3002;</p>
<p>&#x4ece;&#x7248;&#x672c;1.3.2&#x548c;1.2.2&#x5f00;&#x59cb;&#x652f;&#x6301;IPv6&#x5730;&#x5740;&#x3002;</p>
<p>&#x5982;&#x679c;&#x9700;&#x8981;&#x4e34;&#x65f6;&#x5220;&#x9664;&#x5176;&#x4e2d;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x5219;&#x5e94;&#x4f7f;&#x7528;<tt>down</tt>&#x53c2;&#x6570;&#x5bf9;&#x5176;&#x8fdb;&#x884c;&#x6807;&#x8bb0;&#xff0c;&#x4ee5;&#x4fdd;&#x7559;&#x5ba2;&#x6237;&#x7aef;IP&#x5730;&#x5740;&#x7684;&#x5f53;&#x524d;&#x54c8;&#x5e0c;&#x503c;&#x3002;</p>
<p>&#x6837;&#x4f8b;&#xff1a;</p>

<div class="source">
<pre>upstream backend {
    ip_hash;

    server backend1.example.com;
    server backend2.example.com;
    server backend3.example.com down;
    server backend4.example.com;
}
</pre></div>
<p>&#x5728;&#x7248;&#x672c;1.3.1&#x548c;1.2.2&#x4e4b;&#x524d;&#xff0c;&#x65e0;&#x6cd5;&#x4f7f;&#x7528;<tt>ip_hash</tt>&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x65b9;&#x6cd5;&#x4e3a;&#x670d;&#x52a1;&#x5668;&#x6307;&#x5b9a;&#x6743;&#x91cd;&#x3002;</p>
<p><tt>nginx-sticky-module</tt>: nginx&#x7684;&#x4e00;&#x4e2a;&#x6269;&#x5c55;&#x6a21;&#x5757;&#xff0c;&#x5b9e;&#x73b0;&#x4e86;&#x901a;&#x8fc7;Cookie&#x7684;&#x4f1a;&#x8bdd;&#x7c98;&#x8d34;&#x6548;&#x679c;&#x3002;</p>
<p>&#x57fa;&#x672c;&#x539f;&#x7406;&#xff1a;&#x5ba2;&#x6237;&#x7aef;&#x9996;&#x6b21;&#x53d1;&#x8d77;&#x8bbf;&#x95ee;&#x8bf7;&#x6c42;&#x65f6;&#xff0c;&#x9996;&#x5148;&#x6839;&#x636e;round-robin&#x968f;&#x673a;&#x8f6e;&#x8be2;&#x5230;&#x67d0;&#x53f0;&#x540e;&#x7aef;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x7136;&#x540e;&#x5728;&#x54cd;&#x5e94;&#x7684;Set-Cookie&#x4e0a;&#x52a0;&#x4e0a;&#x201c;route=md5(upstream)&#x201d;&#x5b57;&#x6bb5;&#xff08;&#x53ef;&#x80fd;&#x662f;&#x660e;&#x6587;&#xff0c;&#x4e5f;&#x53ef;&#x80fd;&#x662f;md5&#x3001;sha1&#x7b49;Hash&#x503c;&#xff09;&#xff0c;&#x7b2c;&#x4e8c;&#x6b21;&#x8bf7;&#x6c42;&#x518d;&#x5904;&#x7406;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x53d1;&#x73b0;&#x6709;<i>route</i>&#x5b57;&#x6bb5;&#xff0c;&#x4f1a;&#x76f4;&#x63a5;&#x5bfc;&#x5411;&#x539f;&#x6765;&#x7684;&#x90a3;&#x4e2a;&#x8282;&#x70b9;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-keepalive"><tt>keepalive</tt></span><a name="keepalive"></a></h3>

<div class="source">
<pre>Syntax:	keepalive connections;
Default:	&#x2014;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.1.4&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x6fc0;&#x6d3b;&#x5bf9;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x7684;&#x8fde;&#x63a5;&#x8fdb;&#x884c;&#x7f13;&#x5b58;&#x3002;</p>
<p><i>connections</i>&#x53c2;&#x6570;&#x8bbe;&#x7f6e;&#x5728;&#x6bcf;&#x4e2a;&#x5de5;&#x4f5c;&#x8fdb;&#x7a0b;&#x7684;&#x7f13;&#x5b58;&#x4e2d;&#x4fdd;&#x7559;&#x7684;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x7684;&#x6700;&#x5927;&#x7a7a;&#x95f2;keepalive&#x8fde;&#x63a5;&#x6570;&#x3002;&#x5982;&#x679c;&#x8fde;&#x63a5;&#x6570;&#x5927;&#x4e8e;&#x8fd9;&#x4e2a;&#x503c;&#x65f6;&#xff0c;&#x5c06;&#x5173;&#x95ed;&#x6700;&#x8fd1;&#x6700;&#x5c11;&#x4f7f;&#x7528;&#x7684;&#x8fde;&#x63a5;&#x3002;</p>
<p>&#x9700;&#x8981;&#x7279;&#x522b;&#x6ce8;&#x610f;&#x7684;&#x662f;&#xff0c;<tt>keepalive</tt>&#x6307;&#x4ee4;&#x4e0d;&#x9650;&#x5236;nginx&#x5de5;&#x4f5c;&#x8fdb;&#x7a0b;&#x53ef;&#x4ee5;&#x6253;&#x5f00;&#x7684;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x7684;&#x8fde;&#x63a5;&#x603b;&#x6570;&#x3002;<i>connections</i>&#x53c2;&#x6570;&#x5e94;&#x8be5;&#x8bbe;&#x7f6e;&#x7684;&#x8db3;&#x591f;&#x5c0f;&#xff0c;&#x4ee5;&#x4fbf;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x4e5f;&#x80fd;&#x5904;&#x7406;&#x65b0;&#x8fdb;&#x6765;&#x7684;&#x8fde;&#x63a5;&#x3002;</p>
<p>&#x4f7f;&#x7528;keepalive&#x8fde;&#x63a5;&#x7684;memcached&#x4e0a;&#x6e38;&#x6837;&#x4f8b;&#x914d;&#x7f6e;&#xff1a;</p>

<div class="source">
<pre>upstream memcached_backend {
    server 127.0.0.1:11211;
    server 10.0.0.2:11211;

    keepalive 32;
}

server {
    ...

    location /memcached/ {
        set $memcached_key $uri;
        memcached_pass memcached_backend;
    }

}
</pre></div>
<p>&#x5bf9;&#x4e8e;HTTP&#xff0c;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_http_version">proxy_http_version</a>&#x6307;&#x4ee4;&#x5e94;&#x8bbe;&#x7f6e;&#x4e3a;&#x201c;1.1&#x201d;&#xff0c;&#x5e76;&#x4e14;&#x5e94;&#x6e05;&#x9664;&#x201c;Connection&#x201d;&#x5934;&#x5b57;&#x6bb5;&#xff1a;</p>

<div class="source">
<pre>upstream http_backend {
    server 127.0.0.1:8080;

    keepalive 16;
}

server {
    ...

    location /http/ {
        proxy_pass http://http_backend;
        proxy_http_version 1.1;
        proxy_set_header Connection &quot;&quot;;
        ...
    }
}
</pre></div>
<p>&#x6216;&#x8005;&#xff0c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x5c06;&#x201c;Connection&#xff1a;Keep-Alive&#x201d;&#x5934;&#x5b57;&#x6bb5;&#x4f20;&#x9012;&#x7ed9;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x6765;&#x4f7f;&#x7528;HTTP/1.0&#x6301;&#x4e45;&#x8fde;&#x63a5;&#xff0c;&#x4f46;&#x4e0d;&#x5efa;&#x8bae;&#x4f7f;&#x7528;&#x6b64;&#x65b9;&#x6cd5;&#x3002;</p>
<p>&#x5bf9;&#x4e8e;FastCGI&#x670d;&#x52a1;&#x5668;&#xff0c;&#x9700;&#x8981;&#x8bbe;&#x7f6e;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_keep_conn">fastcgi_keep_conn</a>&#x624d;&#x80fd;&#x4f7f;keepalive&#x8fde;&#x63a5;&#x6b63;&#x5e38;&#x5de5;&#x4f5c;&#xff1a;</p>

<div class="source">
<pre>upstream fastcgi_backend {
    server 127.0.0.1:9000;

    keepalive 8;
}

server {
    ...

    location /fastcgi/ {
        fastcgi_pass fastcgi_backend;
        fastcgi_keep_conn on;
        ...
    }
}
</pre></div>
<p>&#x4f7f;&#x7528;&#x9664;&#x9ed8;&#x8ba4;round-robin&#x65b9;&#x6cd5;&#x4e4b;&#x5916;&#x7684;&#x8d1f;&#x8f7d;&#x5e73;&#x8861;&#x5668;&#x65b9;&#x6cd5;&#x65f6;&#xff0c;&#x5fc5;&#x987b;&#x5728;<tt>keepalive</tt>&#x6307;&#x4ee4;&#x4e4b;&#x524d;&#x6fc0;&#x6d3b;&#x5b83;&#x4eec;&#x3002;</p>
<p>SCGI&#x548c;uwsgi&#x534f;&#x8bae;&#x6ca1;&#x6709;keepalive&#x8fde;&#x63a5;&#x7684;&#x6982;&#x5ff5;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-keepalive-requests"><tt>keepalive_requests</tt></span><a name="keepalive_requests"></a></h3>

<div class="source">
<pre>Syntax:	keepalive_requests number;
Default:	
keepalive_requests 100;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.15.3&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x8bbe;&#x7f6e;&#x53ef;&#x901a;&#x8fc7;&#x4e00;&#x4e2a;keepalive&#x8fde;&#x63a5;&#x63d0;&#x4f9b;&#x7684;&#x6700;&#x5927;&#x8bf7;&#x6c42;&#x6570;&#x3002;&#x5728;&#x53d1;&#x51fa;&#x6700;&#x5927;&#x8bf7;&#x6c42;&#x6570;&#x540e;&#xff0c;&#x5c06;&#x5173;&#x95ed;&#x8fde;&#x63a5;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-keepalive-timeout"><tt>keepalive_timeout</tt></span><a name="keepalive_timeout"></a></h3>

<div class="source">
<pre>Syntax:	keepalive_timeout timeout;
Default:	
keepalive_timeout 60s;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.15.3&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x8bbe;&#x7f6e;&#x8d85;&#x65f6;&#xff0c;&#x5728;&#x6b64;&#x671f;&#x95f4;&#x4e0e;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x7684;&#x7a7a;&#x95f2;keepalive&#x8fde;&#x63a5;&#x5c06;&#x4fdd;&#x6301;&#x6253;&#x5f00;&#x72b6;&#x6001;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-least-conn"><tt>least_conn</tt></span><a name="least_conn"></a></h3>

<div class="source">
<pre>Syntax:	least_conn;
Default:	&#x2014;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.3.1&#x548c;1.2.2&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x6307;&#x5b9a;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x7684;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x65b9;&#x6cd5;&#xff0c;&#x5176;&#x4e2d;&#x8bf7;&#x6c42;&#x4f1a;&#x88ab;&#x8f6c;&#x53d1;&#x5230;&#x6d3b;&#x52a8;&#x8fde;&#x63a5;&#x6570;&#x6700;&#x5c11;&#x7684;&#x670d;&#x52a1;&#x5668;&#x4e0a;&#xff0c;&#x540c;&#x65f6;&#x8003;&#x8651;&#x670d;&#x52a1;&#x5668;&#x7684;&#x6743;&#x91cd;&#x3002;&#x5982;&#x679c;&#x6709;&#x591a;&#x4e2a;&#x8fd9;&#x6837;&#x7684;&#x670d;&#x52a1;&#x5668;&#xff08;&#x6d3b;&#x52a8;&#x8fde;&#x63a5;&#x6570;&#x540c;&#x4e3a;&#x6700;&#x5c0f;&#xff09;&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x52a0;&#x6743;&#x8f6e;&#x8be2;&#x65b9;&#x6cd5;&#x4f9d;&#x6b21;&#x5c1d;&#x8bd5;&#x5b83;&#x4eec;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-least-time"><tt>least_time</tt></span><a name="least_time"></a></h3>

<div class="source">
<pre>Syntax:	least_time header | last_byte [inflight];
Default:	&#x2014;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.7.10&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x6307;&#x5b9a;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x7684;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x65b9;&#x6cd5;&#xff0c;&#x5176;&#x4e2d;&#x8bf7;&#x6c42;&#x4f1a;&#x88ab;&#x8f6c;&#x53d1;&#x5230;&#x5e73;&#x5747;&#x54cd;&#x5e94;&#x65f6;&#x95f4;&#x6700;&#x5c0f;&#x548c;&#x6d3b;&#x52a8;&#x8fde;&#x63a5;&#x6570;&#x6700;&#x5c11;&#x7684;&#x670d;&#x52a1;&#x5668;&#x4e0a;&#xff0c;&#x540c;&#x65f6;&#x8003;&#x8651;&#x670d;&#x52a1;&#x5668;&#x7684;&#x6743;&#x91cd;&#x3002;&#x5982;&#x679c;&#x6709;&#x591a;&#x4e2a;&#x8fd9;&#x6837;&#x7684;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x52a0;&#x6743;&#x8f6e;&#x8be2;&#x65b9;&#x6cd5;&#x4f9d;&#x6b21;&#x5c1d;&#x8bd5;&#x5b83;&#x4eec;&#x3002;</p>
<p>&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;<i>header</i>&#x53c2;&#x6570;&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x63a5;&#x6536;<a href="#upstream-header-time">&#x54cd;&#x5e94;&#x5934;</a>&#x7684;&#x65f6;&#x95f4;&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;<i>last_byte</i>&#x53c2;&#x6570;&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x63a5;&#x6536;<a href="#upstream-response-time">&#x5b8c;&#x6574;&#x54cd;&#x5e94;</a>&#x7684;&#x65f6;&#x95f4;&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;<i>inflight</i>&#x53c2;&#x6570;&#xff08;1.11.6&#xff09;&#xff0c;&#x5219;&#x8fd8;&#x4f1a;&#x8003;&#x8651;&#x4e0d;&#x5b8c;&#x6574;&#x7684;&#x8bf7;&#x6c42;&#x3002;</p>
<p>&#x5728;1.11.6&#x7248;&#x4e4b;&#x524d;&#xff0c;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#x4f1a;&#x8003;&#x8651;&#x672a;&#x5b8c;&#x6210;&#x7684;&#x8bf7;&#x6c42;&#x3002;</p>
<p>&#x8be5;&#x6307;&#x4ee4;&#x4f5c;&#x4e3a;&#x6211;&#x4eec;<a class="externalLink" href="https://www.nginx.com/products/">&#x5546;&#x4e1a;&#x8ba2;&#x9605;</a>&#x7684;&#x4e00;&#x90e8;&#x5206;&#x63d0;&#x4f9b;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-queue"><tt>queue</tt></span><a name="queue"></a></h3>

<div class="source">
<pre>Syntax:	queue number [timeout=time];
Default:	&#x2014;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.5.12&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x5982;&#x679c;&#x5728;&#x5904;&#x7406;&#x8bf7;&#x6c42;&#x65f6;&#x65e0;&#x6cd5;&#x7acb;&#x5373;&#x9009;&#x62e9;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x5219;&#x8bf7;&#x6c42;&#x5c06;&#x88ab;&#x7f6e;&#x4e8e;&#x961f;&#x5217;&#x4e2d;&#x3002;&#x8be5;&#x6307;&#x4ee4;&#x6307;&#x5b9a;&#x4e86;&#x53ef;&#x4ee5;&#x540c;&#x65f6;&#x5728;&#x961f;&#x5217;&#x4e2d;&#x7684;&#x6700;&#x5927;&#x8bf7;&#x6c42;&#x6570;<i>number</i>&#x3002;&#x5982;&#x679c;&#x961f;&#x5217;&#x5df2;&#x6ee1;&#xff0c;&#x6216;&#x8005;&#x5728;<i>timeout</i>&#x53c2;&#x6570;&#x4e2d;&#x6307;&#x5b9a;&#x7684;&#x65f6;&#x95f4;&#x6bb5;&#x5185;&#x65e0;&#x6cd5;&#x9009;&#x62e9;&#x8981;&#x4f20;&#x9012;&#x8bf7;&#x6c42;&#x7684;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x5219;&#x4f1a;&#x8fd4;&#x56de;502 (Bad Gateway)&#x9519;&#x8bef;&#x7ed9;&#x5ba2;&#x6237;&#x7aef;&#x3002;</p>
<p><i>timeout</i>&#x53c2;&#x6570;&#x7684;&#x9ed8;&#x8ba4;&#x503c;&#x4e3a;60&#x79d2;&#x3002;</p>
<p>&#x4f7f;&#x7528;&#x9664;&#x9ed8;&#x8ba4;round-robin&#x65b9;&#x6cd5;&#x4e4b;&#x5916;&#x7684;&#x8d1f;&#x8f7d;&#x5e73;&#x8861;&#x5668;&#x65b9;&#x6cd5;&#x65f6;&#xff0c;&#x5fc5;&#x987b;&#x5728;<tt>queue</tt>&#x6307;&#x4ee4;&#x4e4b;&#x524d;&#x6fc0;&#x6d3b;&#x5b83;&#x4eec;&#x3002;</p>
<p>&#x8be5;&#x6307;&#x4ee4;&#x4f5c;&#x4e3a;&#x6211;&#x4eec;<a class="externalLink" href="https://www.nginx.com/products/">&#x5546;&#x4e1a;&#x8ba2;&#x9605;</a>&#x7684;&#x4e00;&#x90e8;&#x5206;&#x63d0;&#x4f9b;&#x3002;</p></div>
<div class="section">
<h3><span id="directives-random"><tt>random</tt></span><a name="random"></a></h3>

<div class="source">
<pre>Syntax:	random [two [method]];
Default:	&#x2014;
Context:	upstream
&#x8be5;&#x6307;&#x4ee4;&#x51fa;&#x73b0;&#x5728;1.15.1&#x7248;&#x672c;&#x4e2d;&#x3002;
</pre></div>
<p>&#x6307;&#x5b9a;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x7684;&#x8d1f;&#x8f7d;&#x5747;&#x8861;&#x65b9;&#x6cd5;&#xff0c;&#x5176;&#x4e2d;&#x8bf7;&#x6c42;&#x5c06;&#x4f20;&#x9012;&#x7ed9;&#x968f;&#x673a;&#x9009;&#x62e9;&#x7684;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x540c;&#x65f6;&#x8003;&#x8651;&#x670d;&#x52a1;&#x5668;&#x7684;&#x6743;&#x91cd;&#x3002;</p>
<p>&#x53ef;&#x9009;&#x7684;<i>two</i>&#x53c2;&#x6570;&#x6307;&#x793a;nginx&#x968f;&#x673a;&#x9009;&#x62e9;<a class="externalLink" href="https://homes.cs.washington.edu/~karlin/papers/balls.pdf">&#x4e24;&#x4e2a;</a>&#x670d;&#x52a1;&#x5668;&#xff0c;&#x7136;&#x540e;&#x4f7f;&#x7528;&#x6307;&#x5b9a;&#x7684;<i>method</i>&#x9009;&#x62e9;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x3002;&#x9ed8;&#x8ba4;&#x65b9;&#x6cd5;&#x662f;<tt>least_conn</tt>&#xff0c;&#x5b83;&#x5c06;&#x8bf7;&#x6c42;&#x4f20;&#x9012;&#x7ed9;&#x6d3b;&#x52a8;&#x8fde;&#x63a5;&#x6570;&#x6700;&#x5c11;&#x7684;&#x670d;&#x52a1;&#x5668;&#x3002;</p>
<p><tt>least_time</tt>&#x65b9;&#x6cd5;&#x5c06;&#x8bf7;&#x6c42;&#x4f20;&#x9012;&#x7ed9;&#x5e73;&#x5747;&#x54cd;&#x5e94;&#x65f6;&#x95f4;&#x6700;&#x77ed;&#x4e14;&#x6d3b;&#x52a8;&#x8fde;&#x63a5;&#x6570;&#x6700;&#x5c11;&#x7684;&#x670d;&#x52a1;&#x5668;&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;<tt>least_time=header</tt>&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x63a5;&#x6536;<a href="#upstream-header-time">&#x54cd;&#x5e94;&#x5934;</a>&#x7684;&#x65f6;&#x95f4;&#x3002;&#x5982;&#x679c;&#x6307;&#x5b9a;&#x4e86;<tt>least_time=last_byte</tt>&#xff0c;&#x5219;&#x4f7f;&#x7528;&#x63a5;&#x6536;<a href="#upstream-response-time">&#x5b8c;&#x6574;&#x54cd;&#x5e94;</a>&#x7684;&#x65f6;&#x95f4;&#x3002;</p></div></div>
<div class="section">
<h2>&#x5185;&#x5d4c;&#x53d8;&#x91cf;<a name="a"></a></h2>
<p><tt>ngx_http_upstream_module</tt>&#x6a21;&#x5757;&#x652f;&#x6301;&#x4ee5;&#x4e0b;&#x5185;&#x5d4c;&#x53d8;&#x91cf;&#xff1a;</p>

<ul>
  
<li>
<p><span id="upstream-addr"><tt>$upstream_addr</tt></span>: &#x4fdd;&#x7559;IP&#x5730;&#x5740;&#x548c;&#x7aef;&#x53e3;&#xff0c;&#x6216;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x7684;UNIX&#x57df;&#x5957;&#x63a5;&#x5b57;&#x7684;&#x8def;&#x5f84;&#x3002;&#x5982;&#x679c;&#x5728;&#x8bf7;&#x6c42;&#x5904;&#x7406;&#x671f;&#x95f4;&#x8fde;&#x63a5;&#x4e86;&#x591a;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x5219;&#x5b83;&#x4eec;&#x7684;&#x5730;&#x5740;&#x7528;&#x9017;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x4f8b;&#x5982;&#x201c;<tt>192.168.1.1:80, 192.168.1.2:80, unix:/tmp/sock</tt>&#x201d;&#x3002;&#x5982;&#x679c;&#x53d1;&#x751f;&#x4ece;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x5230;&#x53e6;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x7684;&#x5185;&#x90e8;&#x91cd;&#x5b9a;&#x5411;&#xff0c;&#x7531;&#x201c;X-Accel-Redirect&#x201d;&#x6216;error_page&#x53d1;&#x8d77;&#xff0c;&#x90a3;&#x4e48;&#x6765;&#x81ea;&#x4e0d;&#x540c;&#x7ec4;&#x7684;&#x670d;&#x52a1;&#x5668;&#x5730;&#x5740;&#x7528;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x4f8b;&#x5982;&#xff0c;&#x201c;<tt>192.168.1.1:80, 192.168.1.2:80, unix:/tmp/sock : 192.168.10.1:80, 192.168.10.2:80</tt>&#x201d;&#x3002;&#x5982;&#x679c;&#x65e0;&#x6cd5;&#x9009;&#x62e9;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x5219;&#x53d8;&#x91cf;&#x5c06;&#x4fdd;&#x7559;&#x670d;&#x52a1;&#x5668;&#x7ec4;&#x7684;&#x540d;&#x79f0;&#x3002;</p></li>
  
<li>
<p><span id="upstream-bytes-received"><tt>$upstream_bytes_received</tt></span>: &#x4ece;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x63a5;&#x6536;&#x7684;&#x5b57;&#x8282;&#x6570;&#xff08;1.11.4&#xff09;&#x3002;&#x6765;&#x81ea;&#x591a;&#x4e2a;&#x8fde;&#x63a5;&#x7684;&#x503c;&#x7531;&#x9017;&#x53f7;&#x548c;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x5982;<a href="#upstream-addr"><tt>$upstream_addr</tt></a>&#x53d8;&#x91cf;&#x4e2d;&#x7684;&#x5730;&#x5740;&#x3002;</p></li>
  
<li>
<p><span id="upstream-bytes-sent"><tt>$upstream_bytes_sent</tt></span>: &#x53d1;&#x9001;&#x5230;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x7684;&#x5b57;&#x8282;&#x6570;&#xff08;1.15.8&#xff09;&#x3002;&#x6765;&#x81ea;&#x591a;&#x4e2a;&#x8fde;&#x63a5;&#x7684;&#x503c;&#x7531;&#x9017;&#x53f7;&#x548c;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x5982;<a href="#upstream-addr"><tt>$upstream_addr</tt></a>&#x53d8;&#x91cf;&#x4e2d;&#x7684;&#x5730;&#x5740;&#x3002;</p></li>
  
<li>
<p><span id="upstream-cache-status"><tt>$upstream_cache_status</tt></span>: &#x4fdd;&#x7559;&#x8bbf;&#x95ee;&#x54cd;&#x5e94;&#x7f13;&#x5b58;&#x7684;&#x72b6;&#x6001;&#xff08;0.8.3&#xff09;&#x3002;&#x72b6;&#x6001;&#x53ef;&#x4ee5;&#x662f;&#x201c;<tt>MISS</tt>&#x201d;&#xff0c;&#x201c;<tt>BYPASS</tt>&#x201d;&#xff0c;&#x201c;<tt>EXPIRED</tt>&#x201d;&#xff0c;&#x201c;<tt>STALE</tt>&#x201d;&#xff0c;&#x201c;<tt>UPDATING</tt>&#x201d;&#xff0c;&#x201c;<tt>REVALIDATED</tt>&#x201d;&#x6216;&#x201c;<tt>HIT</tt>&#x201d;&#x3002;</p></li>
  
<li>
<p><span id="upstream-connect-time"><tt>$upstream_connect_time</tt></span>: &#x4fdd;&#x7559;&#x4e0e;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x5efa;&#x7acb;&#x8fde;&#x63a5;&#x6240;&#x82b1;&#x8d39;&#x7684;&#x65f6;&#x95f4;&#xff08;1.9.1&#xff09;&#xff1b;&#x65f6;&#x95f4;&#x4ee5;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff0c;&#x5206;&#x8fa8;&#x7387;&#x4e3a;&#x6beb;&#x79d2;&#x3002;&#x5728;SSL&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x5305;&#x62ec;&#x5728;&#x63e1;&#x624b;&#x4e0a;&#x82b1;&#x8d39;&#x7684;&#x65f6;&#x95f4;&#x3002;&#x591a;&#x4e2a;&#x8fde;&#x63a5;&#x7684;&#x65f6;&#x95f4;&#x7528;&#x9017;&#x53f7;&#x548c;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x5982;<a href="#upstream-addr"><tt>$upstream_addr</tt></a>&#x53d8;&#x91cf;&#x4e2d;&#x7684;&#x5730;&#x5740;&#x3002;</p></li>
  
<li>
<p><span id="upstream-cookie-name"><tt>$upstream_cookie_name</tt></span>: &#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x5728;&#x201c;Set-Cookie&#x201d;&#x54cd;&#x5e94;&#x5934;&#x5b57;&#x6bb5;&#xff08;1.7.1&#xff09;&#x4e2d;&#x53d1;&#x9001;&#x7684;&#x5177;&#x6709;&#x6307;&#x5b9a;<i>name</i>&#x7684;cookie&#x3002;&#x53ea;&#x4fdd;&#x5b58;&#x6765;&#x81ea;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x54cd;&#x5e94;&#x7684;cookie&#x3002;</p></li>
  
<li>
<p><span id="upstream-header-time"><tt>$upstream_header_time</tt></span>: &#x4fdd;&#x7559;&#x4ece;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x63a5;&#x6536;&#x54cd;&#x5e94;&#x5934;&#x6240;&#x82b1;&#x8d39;&#x7684;&#x65f6;&#x95f4;&#xff08;1.7.10&#xff09;&#xff1b;&#x65f6;&#x95f4;&#x4ee5;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff0c;&#x5206;&#x8fa8;&#x7387;&#x4e3a;&#x6beb;&#x79d2;&#x3002;&#x591a;&#x4e2a;&#x54cd;&#x5e94;&#x7684;&#x65f6;&#x95f4;&#x7528;&#x9017;&#x53f7;&#x548c;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x5982;<a href="#upstream-addr"><tt>$upstream_addr</tt></a>&#x53d8;&#x91cf;&#x4e2d;&#x7684;&#x5730;&#x5740;&#x3002;</p></li>
  
<li>
<p><span id="upstream-http-name"><tt>$upstream_http_name</tt></span>: &#x4fdd;&#x7559;&#x670d;&#x52a1;&#x5668;&#x54cd;&#x5e94;&#x5934;&#x5b57;&#x6bb5;&#x3002;&#x4f8b;&#x5982;&#xff0c;&#x201c;Server&#x201d;&#x54cd;&#x5e94;&#x5934;&#x5b57;&#x6bb5;&#x53ef;&#x901a;&#x8fc7;<tt>$upstream_http_server</tt>&#x53d8;&#x91cf;&#x83b7;&#x5f97;&#x3002;&#x5c06;&#x5934;&#x5b57;&#x6bb5;&#x540d;&#x79f0;&#x8f6c;&#x6362;&#x4e3a;&#x53d8;&#x91cf;&#x540d;&#x7684;&#x89c4;&#x5219;&#x4e0e;&#x4ee5;&#x201c;<a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#var_http_">$http_</a>&#x201d;&#x524d;&#x7f00;&#x5f00;&#x5934;&#x7684;&#x53d8;&#x91cf;&#x76f8;&#x540c;&#x3002;&#x53ea;&#x4fdd;&#x5b58;&#x6765;&#x81ea;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x670d;&#x52a1;&#x5668;&#x54cd;&#x5e94;&#x7684;&#x5934;&#x5b57;&#x6bb5;&#x3002;</p></li>
  
<li>
<p><span id="upstream-queue-time"><tt>$upstream_queue_time</tt></span>: &#x4fdd;&#x7559;&#x8bf7;&#x6c42;&#x5728;&#x4e0a;&#x6e38;&#x961f;&#x5217;&#x4e2d;&#x6240;&#x82b1;&#x8d39;&#x7684;&#x65f6;&#x95f4;&#xff08;1.13.9&#xff09;&#xff1b;&#x65f6;&#x95f4;&#x4ee5;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff0c;&#x5206;&#x8fa8;&#x7387;&#x4e3a;&#x6beb;&#x79d2;&#x3002;&#x591a;&#x4e2a;&#x54cd;&#x5e94;&#x7684;&#x65f6;&#x95f4;&#x7528;&#x9017;&#x53f7;&#x548c;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x5982;<a href="#upstream-addr"><tt>$upstream_addr</tt></a>&#x53d8;&#x91cf;&#x4e2d;&#x7684;&#x5730;&#x5740;&#x3002;</p></li>
  
<li>
<p><span id="upstream-response-length"><tt>$upstream_response_length</tt></span>: &#x4fdd;&#x7559;&#x4ece;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x83b7;&#x5f97;&#x7684;&#x54cd;&#x5e94;&#x957f;&#x5ea6;&#xff08;0.7.27&#xff09;&#xff1b;&#x957f;&#x5ea6;&#x4ee5;&#x5b57;&#x8282;&#x4e3a;&#x5355;&#x4f4d;&#x3002;&#x591a;&#x4e2a;&#x54cd;&#x5e94;&#x7684;&#x957f;&#x5ea6;&#x7528;&#x9017;&#x53f7;&#x548c;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x5982;<a href="#upstream-addr"><tt>$upstream_addr</tt></a>&#x53d8;&#x91cf;&#x4e2d;&#x7684;&#x5730;&#x5740;&#x3002;</p></li>
  
<li>
<p><span id="upstream-response-time"><tt>$upstream_response_time</tt></span>: &#x4fdd;&#x7559;&#x4ece;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x63a5;&#x6536;&#x54cd;&#x5e94;&#x6240;&#x82b1;&#x8d39;&#x7684;&#x65f6;&#x95f4;&#xff1b;&#x65f6;&#x95f4;&#x4ee5;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff0c;&#x5206;&#x8fa8;&#x7387;&#x4e3a;&#x6beb;&#x79d2;&#x3002;&#x591a;&#x4e2a;&#x54cd;&#x5e94;&#x7684;&#x65f6;&#x95f4;&#x7528;&#x9017;&#x53f7;&#x548c;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x5982;<a href="#upstream-addr"><tt>$upstream_addr</tt></a>&#x53d8;&#x91cf;&#x4e2d;&#x7684;&#x5730;&#x5740;&#x3002;</p></li>
</ul>

<ul>
  
<li>
<p><span id="upstream-status"><tt>$upstream_status</tt></span>: &#x4fdd;&#x7559;&#x4ece;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x83b7;&#x5f97;&#x7684;&#x54cd;&#x5e94;&#x7684;&#x72b6;&#x6001;&#x7801;&#x3002;&#x591a;&#x4e2a;&#x54cd;&#x5e94;&#x7684;&#x72b6;&#x6001;&#x7801;&#x7528;&#x9017;&#x53f7;&#x548c;&#x5192;&#x53f7;&#x5206;&#x9694;&#xff0c;&#x5982;<a href="#upstream-addr"><tt>$upstream_addr</tt></a>&#x53d8;&#x91cf;&#x4e2d;&#x7684;&#x5730;&#x5740;&#x3002;&#x5982;&#x679c;&#x672a;&#x9009;&#x4e2d;&#x670d;&#x52a1;&#x5668;&#xff0c;&#x5219;&#x53d8;&#x91cf;&#x5c06;&#x4fdd;&#x7559;502 (Bad Gateway)&#x72b6;&#x6001;&#x7801;&#x3002;</p></li>
  
<li>
<p><span id="upstream-trailer-name"><tt>$upstream_trailer_name</tt></span>: &#x4fdd;&#x7559;&#x4ece;&#x4e0a;&#x6e38;&#x670d;&#x52a1;&#x5668;&#x83b7;&#x5f97;&#x7684;&#x54cd;&#x5e94;&#x7ed3;&#x675f;&#x7684;&#x5b57;&#x6bb5;&#xff08;1.13.10&#xff09;&#x3002;</p></li>
</ul>
<p>TIP: <a class="externalLink" href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html">&#x539f;&#x6587;&#x94fe;&#x63a5;</a></p></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                   2019.
          All Rights Reserved.      
                    
      </div>

        
                <p id="poweredBy" class="pull-right">
                                                                                                                      <a href="http://maven.apache.org/" title="Built by Maven" class="builtBy">
        <img class="builtBy"  alt="Built by Maven" src="../../images/logos/maven-feather.png"    />
      </a>
                  </p>
        
                </div>
    </footer>
  </body>
</html>
